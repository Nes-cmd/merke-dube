import{u as C,r as S,v as w,j as e,$ as N}from"./app-J7HsqsI9.js";import{A as D}from"./AuthenticatedLayout-knoU74ve.js";import{d as c}from"./dayjs.min-Dx7zJ0Eh.js";import{C as I}from"./index-C9h9lfZs.js";import{F as s}from"./index-BqbYBDii.js";import{T as p}from"./index-BzvObz3P.js";import{S as m,s as P}from"./index-DifNHl01.js";import{I as x}from"./index-B4GooqbK.js";import{D as h}from"./index-B23GTcMp.js";import{B as R}from"./EllipsisOutlined-z3H18_gv.js";/* empty css            */import"./MenuOutlined-CPzlee0P.js";import"./move-C0wxGgXZ.js";import"./index-DY6NS2TT.js";import"./row-CrguNsy7.js";import"./index-BPj3NJfq.js";import"./BaseInput-CPkyeE5i.js";import"./DownOutlined-DYFiL0VQ.js";import"./SearchOutlined-BswwKShY.js";import"./EyeOutlined-DkxJknix.js";const{Option:q}=m,{TextArea:M}=x,Z=({auth:f,item:l,suppliers:b})=>{var d;const{t}=C(),[u,j]=S.useState(null),{data:i,setData:n,post:y,processing:_,errors:r}=w({quantity:1,purchase_price:l.purchase_price||0,supplier_id:((d=l.supplier)==null?void 0:d.id)||null,batch_number:"",manufacture_date:null,expiry_date:null,notes:""}),v=()=>{y(route("products.store-refill",l.id),{onSuccess:()=>{P.success(t("Product refilled successfully!"))}})},g=(a,o)=>{j(a),n("manufacture_date",o)};return e.jsxs(D,{user:f.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:t("Refill Product")}),children:[e.jsx(N,{title:t("Refill Product")}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-6",children:e.jsxs(I,{title:t("Refill Product: {name}",{name:l.name}),className:"mb-6",children:[e.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded",children:[e.jsxs("p",{className:"font-bold",children:[t("Current Inventory"),": ",l.quantity]}),e.jsxs("p",{children:[t("Current Batch"),": ",l.batch_number||t("N/A")]}),e.jsxs("p",{children:[t("Last Refill Date"),": ",l.last_refill_date?c(l.last_refill_date).format("YYYY-MM-DD"):t("Never")]}),e.jsxs("p",{children:[t("Refill Count"),": ",l.refill_count]})]}),e.jsxs(s,{layout:"vertical",onFinish:v,children:[e.jsx(s.Item,{label:t("Quantity to Add"),required:!0,validateStatus:r.quantity?"error":"",help:r.quantity,children:e.jsx(p,{min:1,value:i.quantity,onChange:a=>n("quantity",a),style:{width:"100%"}})}),e.jsx(s.Item,{label:t("Purchase Price"),validateStatus:r.purchase_price?"error":"",help:r.purchase_price,children:e.jsx(p,{min:0,step:.01,value:i.purchase_price,onChange:a=>n("purchase_price",a),style:{width:"100%"}})}),e.jsx(s.Item,{label:t("Supplier"),validateStatus:r.supplier_id?"error":"",help:r.supplier_id,children:e.jsx(m,{showSearch:!0,placeholder:t("Select a supplier"),optionFilterProp:"children",value:i.supplier_id,onChange:a=>n("supplier_id",a),filterOption:(a,o)=>o.children.toLowerCase().indexOf(a.toLowerCase())>=0,allowClear:!0,style:{width:"100%"},children:b.map(a=>e.jsx(q,{value:a.id,children:a.name},a.id))})}),e.jsx(s.Item,{label:t("Batch Number"),validateStatus:r.batch_number?"error":"",help:r.batch_number,children:e.jsx(x,{value:i.batch_number,onChange:a=>n("batch_number",a.target.value),placeholder:t("Enter batch number")})}),e.jsx(s.Item,{label:t("Manufacture Date"),validateStatus:r.manufacture_date?"error":"",help:r.manufacture_date,children:e.jsx(h,{value:u,onChange:g,style:{width:"100%"}})}),e.jsx(s.Item,{label:t("Expiry Date"),validateStatus:r.expiry_date?"error":"",help:r.expiry_date,children:e.jsx(h,{value:i.expiry_date?c(i.expiry_date):null,onChange:(a,o)=>n("expiry_date",o),style:{width:"100%"},disabledDate:a=>u&&a&&a<u})}),e.jsx(s.Item,{label:t("Notes"),validateStatus:r.notes?"error":"",help:r.notes,children:e.jsx(M,{value:i.notes,onChange:a=>n("notes",a.target.value),rows:4,placeholder:t("Enter any additional notes")})}),e.jsx(s.Item,{children:e.jsx(R,{type:"primary",htmlType:"submit",loading:_,className:"bg-primary-500",children:t("Refill Product")})})]})]})})})})]})};export{Z as default};
