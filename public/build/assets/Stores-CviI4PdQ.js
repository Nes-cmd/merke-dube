import{r as l,j as e}from"./app-BrWmvN9o.js";import{F as a}from"./index-D7Nbh5W0.js";import{B as x}from"./EllipsisOutlined-BVOabwk_.js";import{R as w}from"./index-BB7cPWkL.js";import{S as C}from"./index-D8yoxiRN.js";import{A as D}from"./index-Ckg9Niwg.js";import{L as u}from"./index-77XtHber.js";import{C as E}from"./index-ooL_S3fB.js";import{R}from"./DeleteOutlined-CpYCOdIx.js";import{M as h}from"./index-BSgkkuUf.js";import{I as p}from"./index-Bj_dR6NL.js";import{s as r}from"./index-D8fjzl8g.js";/* empty css            */import"./row-_w8NHETX.js";import"./index-BRRz5ppq.js";import"./BaseInput-xYuoHulp.js";import"./index-CUWDS_la.js";import"./SearchOutlined-DiTr9x9V.js";import"./EyeOutlined-CFoueOds.js";import"./move-D6Noa-TR.js";import"./DownOutlined-Bl3KEFK6.js";const X=()=>{const o=useDispatch(),{t:s}=useTranslation(),{stores:i,loading:j,error:S}=useSelector(t=>t.stores),[g,n]=l.useState(!1),[d]=a.useForm(),[b,y]=l.useState(null),[I,c]=l.useState(!1);l.useEffect(()=>{i.length===0&&o(fetchStores())},[o,i.length]);const N=async()=>{try{const t=await d.validateFields(),f=await o(createStore(t));createStore.fulfilled.match(f)?(r.success(s("Success message")),o(fetchStores()),setTimeout(()=>n(!1),1e3)):r.error(s("Error message"))}catch{r.error(s("Error message"))}},v=async t=>{if(i.find(m=>m.id===t).items_count>0)r.error(s("Delete error"));else{const m=await o(deleteStore(t));deleteStore.fulfilled.match(m)?r.success(s("Delete success")):r.error(s("Error message"))}c(!1)};return e.jsxs("div",{className:"container mx-auto px-4 py-2",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h1",{className:"text-primary-500 text-3xl font-bold",children:s("Stores")}),e.jsxs(x,{type:"primary",className:"bg-primary",onClick:()=>n(!0),children:[e.jsx(w,{})," ",s("Store")]})]}),j?e.jsx("div",{className:"flex justify-center items-center",children:e.jsx(C,{size:"large"})}):S?e.jsx(D,{message:s("Error loading stores"),type:"error",showIcon:!0}):e.jsx("div",{className:"w-full",children:e.jsx(u,{grid:{gutter:16,xs:1,sm:1,md:2,lg:3,xl:3},dataSource:i,renderItem:t=>e.jsx(u.Item,{children:e.jsxs(E,{hoverable:!0,className:"shadow-md",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:t.name}),e.jsxs("div",{className:"flex items-center",children:[e.jsxs("span",{className:"mr-2",children:[s("Items count"),": ",t.items_count]}),e.jsx(x,{icon:e.jsx(R,{}),danger:!0,onClick:()=>{y(t.id),c(!0)}})]})]}),e.jsxs("div",{className:"mt-2",children:[e.jsxs("p",{children:[e.jsxs("strong",{children:[s("Location"),":"]})," ",t.location]}),e.jsxs("p",{children:[e.jsxs("strong",{children:[s("Owner"),":"]})," ",t.owner.name]}),e.jsxs("p",{children:[e.jsxs("strong",{children:[s("Phone number"),":"]})," ",t.owner.phone_number]})]})]})})})}),e.jsx(h,{title:s("Add store modal title"),open:g,onOk:N,onCancel:()=>n(!1),children:e.jsxs(a,{form:d,layout:"vertical",children:[e.jsx(a.Item,{name:"name",label:s("Store name"),rules:[{required:!0,message:s("Please input the store name!")}],children:e.jsx(p,{})}),e.jsx(a.Item,{name:"location",label:s("Store location"),children:e.jsx(p,{})})]})}),e.jsx(h,{title:s("Confirm delete title"),open:I,onOk:()=>v(b),onCancel:()=>c(!1),children:e.jsx("p",{children:s("Confirm delete message")})})]})};export{X as default};
