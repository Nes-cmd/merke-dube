import{u as b,r as v,v as y,R as C,j as e,Y as h,$ as D}from"./app-CRCs68rE.js";import{S as R,A as S,R as E}from"./AuthenticatedLayout-C40XysMS.js";import{d as A}from"./dayjs.min-C6U6SvUP.js";import{s as p}from"./index-BzAFGkKR.js";import{T as N}from"./index-DZkL3miK.js";import{B as c}from"./EllipsisOutlined-BN-ZZJYF.js";import{R as T}from"./ArrowLeftOutlined-BkQCZah1.js";import{C as $}from"./index-CC03SSas.js";import{D as o}from"./index-DdiFiIrN.js";import{D as k}from"./index-BejIUwt0.js";import{T as u}from"./index-Bx08ww7s.js";import{F as w}from"./Table-Cs1RrENC.js";import{R as M}from"./EditOutlined-CgMcCK14.js";import{M as _}from"./index-BaIi0PFn.js";import{F as i}from"./index-dGg0aISM.js";import{I as d}from"./index-ySzzkY_X.js";import{R as F}from"./PhoneOutlined-CUzn0tLt.js";import{R as Y,a as z}from"./MailOutlined-Bv68Ec3Y.js";import{R as q}from"./MenuOutlined-CSJrGBAl.js";/* empty css            */import"./move-DVxTIaS1.js";import"./BaseInput-CfSJKDsY.js";import"./SearchOutlined-DiR9Qobr.js";import"./DownOutlined-V-h3AYIb.js";import"./styleChecker-D6B7uQ6j.js";import"./addEventListener-BWQubspr.js";import"./index-DZxQkxSO.js";import"./index-CUWDS_la.js";import"./EyeOutlined-_2BUD01o.js";import"./index-BLSJKx67.js";import"./row-vOp5nfUz.js";const{TabPane:B}=u,{TextArea:H}=d,ge=({auth:j,customer:s,flash:l})=>{var x;const{t:a}=b(),[f,m]=v.useState(!1),r=y({id:s.id,name:s.name,phone:s.phone||"",email:s.email||"",address:s.address||"",notes:s.notes||""});C.useEffect(()=>{l.message&&p.success(l.message),l.error&&p.error(l.error)},[l]);const I=()=>{r.put(route("customers.update",s.id),{onSuccess:()=>{m(!1),p.success(a("Customer updated successfully"))},onError:t=>{console.error(t)}})},g=[{title:a("Date"),dataIndex:"created_at",key:"created_at",render:t=>A(t).format("YYYY-MM-DD HH:mm"),sorter:(t,n)=>new Date(t.created_at)-new Date(n.created_at)},{title:a("Item"),dataIndex:"item_name",key:"item_name"},{title:a("Quantity"),dataIndex:"quantity",key:"quantity"},{title:a("Total"),dataIndex:"total",key:"total",render:t=>`$${parseFloat(t).toFixed(2)}`},{title:a("Status"),dataIndex:"status",key:"status",render:t=>{let n=t==="completed"?"green":"orange";return e.jsx(N,{color:n,children:t})}},{title:a("Actions"),key:"actions",render:(t,n)=>e.jsx(R,{children:e.jsx(h,{href:route("sales.show",n.id),children:e.jsx(c,{size:"small",children:a("View")})})})}];return e.jsxs(S,{user:j.user,children:[e.jsx(D,{title:a("Customer Details")}),e.jsxs("div",{className:"py-6 mx-auto max-w-7xl sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-4",children:e.jsx(h,{href:route("customers.index"),children:e.jsx(c,{icon:e.jsx(T,{}),children:a("Back to Customers")})})}),e.jsxs($,{title:a("Customer Details"),extra:e.jsx(c,{type:"primary",icon:e.jsx(M,{}),onClick:()=>m(!0),className:"bg-primary-500",children:a("Edit")}),children:[e.jsxs(o,{bordered:!0,column:{xxl:4,xl:3,lg:3,md:2,sm:1,xs:1},children:[e.jsx(o.Item,{label:a("Name"),children:s.name}),e.jsx(o.Item,{label:a("Phone"),children:s.phone||a("N/A")}),e.jsx(o.Item,{label:a("Email"),children:s.email||a("N/A")}),e.jsx(o.Item,{label:a("Total Sales"),children:((x=s.sales)==null?void 0:x.length)||0}),e.jsx(o.Item,{label:a("Address"),span:2,children:s.address||a("N/A")}),e.jsx(o.Item,{label:a("Notes"),span:4,children:s.notes||a("N/A")})]}),e.jsx(k,{}),e.jsx(u,{defaultActiveKey:"1",children:e.jsx(B,{tab:a("Sales History"),children:e.jsx(w,{dataSource:s.sales||[],columns:g,rowKey:"id",pagination:{pageSize:10,showSizeChanger:!0,pageSizeOptions:["10","20","50"]},scroll:{x:"max-content"}})},"1")})]})]}),e.jsx(_,{title:a("Edit Customer"),open:f,onOk:I,onCancel:()=>{m(!1),r.reset(),r.setData({id:s.id,name:s.name,phone:s.phone||"",email:s.email||"",address:s.address||"",notes:s.notes||""})},confirmLoading:r.processing,children:e.jsxs(i,{layout:"vertical",children:[e.jsx(i.Item,{label:a("Name"),validateStatus:r.errors.name?"error":"",help:r.errors.name,required:!0,children:e.jsx(d,{prefix:e.jsx(E,{}),value:r.data.name,onChange:t=>r.setData("name",t.target.value),placeholder:a("Enter customer name")})}),e.jsx(i.Item,{label:a("Phone Number"),validateStatus:r.errors.phone?"error":"",help:r.errors.phone,children:e.jsx(d,{prefix:e.jsx(F,{}),value:r.data.phone,onChange:t=>r.setData("phone",t.target.value),placeholder:a("Enter phone number")})}),e.jsx(i.Item,{label:a("Email"),validateStatus:r.errors.email?"error":"",help:r.errors.email,children:e.jsx(d,{prefix:e.jsx(Y,{}),value:r.data.email,onChange:t=>r.setData("email",t.target.value),placeholder:a("Enter email address")})}),e.jsx(i.Item,{label:a("Address"),validateStatus:r.errors.address?"error":"",help:r.errors.address,children:e.jsx(d,{prefix:e.jsx(q,{}),value:r.data.address,onChange:t=>r.setData("address",t.target.value),placeholder:a("Enter address")})}),e.jsx(i.Item,{label:a("Notes"),validateStatus:r.errors.notes?"error":"",help:r.errors.notes,children:e.jsx(H,{prefix:e.jsx(z,{}),value:r.data.notes,onChange:t=>r.setData("notes",t.target.value),placeholder:a("Additional notes"),rows:4})})]})})]})};export{ge as default};
