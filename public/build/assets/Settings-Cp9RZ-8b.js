import{u as se,r as d,v,R as re,j as e,$ as ae}from"./app-J7HsqsI9.js";import{A as te,R as k,c as oe,a as ne}from"./AuthenticatedLayout-knoU74ve.js";import{s as c}from"./index-DifNHl01.js";import{M as b}from"./index-DcVtvz2k.js";import{T as S}from"./index-Dz6IsBsV.js";import{P as C}from"./index-BUOojXlC.js";import{B as m}from"./EllipsisOutlined-z3H18_gv.js";import{R as I}from"./DeleteOutlined-Cw2q4Eec.js";import{T as M,R as T}from"./index-DY6NS2TT.js";import{C as j}from"./index-C9h9lfZs.js";import{R as x,F as A}from"./Table-C7mTbJGI.js";import{a as le}from"./MenuOutlined-CPzlee0P.js";import{R as ie}from"./AppstoreOutlined-BqMaxEta.js";import{F as l}from"./index-BqbYBDii.js";import{I as p}from"./index-B4GooqbK.js";import{A as ce}from"./index-kYa6q1Br.js";import{R as de}from"./PhoneOutlined-EIDEKR6-.js";/* empty css            */import"./move-C0wxGgXZ.js";import"./BaseInput-CPkyeE5i.js";import"./SearchOutlined-BswwKShY.js";import"./DownOutlined-DYFiL0VQ.js";import"./index-BPj3NJfq.js";import"./index-BwMG-dte.js";import"./styleChecker-Ds4zr2-F.js";import"./addEventListener-BJOWCriI.js";import"./index-DmrLIlKl.js";import"./index-CUWDS_la.js";import"./EyeOutlined-DkxJknix.js";import"./row-CrguNsy7.js";const{TabPane:g}=M,{TextArea:R}=p,Oe=({auth:u,workers:D,isOwner:P,categories:L,shops:_,flash:h})=>{const{t:s,locale:F,setLocale:$}=se(),[V,q]=d.useState("1"),[E,B]=d.useState(window.innerWidth),[W,y]=d.useState(!1),[me,he]=d.useState(!1),[z,N]=d.useState(!1),o=v({name:"",description:""}),a=v({name:"",location:"",phone:"",description:""}),{delete:w}=v(),t=v({name:"",phone:"",email:"",role:"seller"}),[K,f]=d.useState(!1),[pe,xe]=d.useState(null);d.useEffect(()=>{const r=()=>{B(window.innerWidth)};return window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]),re.useEffect(()=>{h.message&&c.success(h.message),h.error&&c.error(h.error),h.password_info&&b.info({title:s("Temporary Password"),content:e.jsxs("div",{children:[e.jsx("p",{children:h.password_info}),e.jsx("p",{className:"text-red-500 font-semibold mt-2",children:s("Please save this password as it will not be shown again.")})]})})},[h]);const O=()=>{console.log("Submitting form with data:",t.data),t.post(route("settings.add-worker"),{onSuccess:()=>{f(!1),t.reset(),window.location.reload()},onError:r=>{console.error("Error adding team member:",r)}})},Y=r=>{w(route("settings.remove-worker",r),{onSuccess:()=>{c.success(s("Team member removed successfully"))},onError:()=>{c.error(s("Failed to remove team member"))}})},G=()=>{o.post(route("settings.add-category"),{onSuccess:()=>{y(!1),o.reset()},onError:r=>{console.error(r)}})},H=r=>{w(route("settings.delete-category",r),{onSuccess:()=>{c.success(s("Category deleted successfully"))},onError:()=>{c.error(s("Failed to delete category"))}})},J=r=>{const n=r.target.value;$(n)},Q=()=>{a.post(route("shops.store"),{onSuccess:()=>{N(!1),a.reset(),c.success(s("Shop added successfully"))},onError:r=>{console.error(r)}})},U=r=>{w(route("settings.delete-shop",r),{onSuccess:()=>{c.success(s("Shop deleted successfully"))},onError:()=>{c.error(s("Failed to delete shop"))}})},X=[{title:s("Name"),dataIndex:"name",key:"name"},{title:s("Phone"),dataIndex:"phone_number",key:"phone_number"},{title:s("Role"),key:"role",render:(r,n)=>n.is_owner?e.jsx(S,{color:"gold",children:s("Owner")}):n.is_admin?e.jsx(S,{color:"blue",children:s("Admin")}):e.jsx(S,{color:"green",children:s("Seller")})},{title:s("Actions"),key:"actions",render:(r,n)=>e.jsx(C,{title:s("Are you sure you want to remove this team member?"),onConfirm:()=>Y(n.id),okText:s("Yes"),cancelText:s("No"),children:e.jsx(m,{danger:!0,icon:e.jsx(I,{})})})}],Z=[{title:s("Name"),dataIndex:"name",key:"name"},{title:s("Description"),dataIndex:"description",key:"description",responsive:["md"]},{title:s("Actions"),key:"actions",render:(r,n)=>e.jsx(C,{title:s("Are you sure you want to delete this category?"),onConfirm:()=>H(n.id),okText:s("Yes"),cancelText:s("No"),children:e.jsx(m,{danger:!0,icon:e.jsx(I,{})})})}],ee=[{title:s("Name"),dataIndex:"name",key:"name",render:(r,n)=>e.jsx("a",{href:route("shops.show",n.id),children:r})},{title:s("Location"),dataIndex:"location",key:"location",responsive:["md"]},{title:s("Phone"),dataIndex:"phone",key:"phone",responsive:["lg"]},{title:s("Actions"),key:"actions",render:(r,n)=>e.jsx(C,{title:s("Are you sure you want to delete this shop?"),onConfirm:()=>U(n.id),okText:s("Yes"),cancelText:s("No"),okButtonProps:{danger:!0},children:e.jsx(m,{danger:!0,icon:e.jsx(I,{}),size:"small",children:s("Delete")})})}],i=E<768?"top":"left";return e.jsxs(te,{user:u.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:s("Settings")}),children:[e.jsx(ae,{title:s("Settings")}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-6",children:e.jsxs(M,{activeKey:V,onChange:q,tabPosition:i,className:"settings-tabs",children:[e.jsx(g,{tab:e.jsxs("span",{className:"flex items-center",children:[e.jsx(le,{className:i==="top"?"mr-1":"mr-2"}),e.jsx("span",{className:i==="top"?"hidden sm:inline":"",children:s("Language")})]}),children:e.jsx(j,{title:s("Language Settings"),className:"mb-6",children:e.jsx("div",{className:"py-4",children:e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"text-lg font-medium mb-2",children:s("Select Language")}),e.jsxs(x.Group,{value:F,onChange:J,children:[e.jsx(x.Button,{value:"en",children:"English"}),e.jsx(x.Button,{value:"am",children:"አማርኛ"})]})]})})})},"1"),e.jsx(g,{tab:e.jsxs("span",{className:"flex items-center",children:[e.jsx(k,{className:i==="top"?"mr-1":"mr-2"}),e.jsx("span",{className:i==="top"?"hidden sm:inline":"",children:s("Profile")})]}),children:e.jsx(j,{title:s("Profile Information"),className:"mb-6",children:e.jsxs("div",{className:"py-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center mb-4",children:[e.jsxs("div",{className:"font-medium w-32 mb-2 md:mb-0",children:[s("Name"),":"]}),e.jsx("div",{children:u.user.name})]}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center mb-4",children:[e.jsxs("div",{className:"font-medium w-32 mb-2 md:mb-0",children:[s("Email"),":"]}),e.jsx("div",{children:u.user.email})]}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center",children:[e.jsxs("div",{className:"font-medium w-32 mb-2 md:mb-0",children:[s("Phone"),":"]}),e.jsx("div",{children:u.user.phone_number||s("Not provided")})]})]})})},"2"),P&&e.jsx(g,{tab:e.jsxs("span",{className:"flex items-center",children:[e.jsx(oe,{className:i==="top"?"mr-1":"mr-2"}),e.jsx("span",{className:i==="top"?"hidden sm:inline":"",children:s("Team")})]}),children:e.jsx(j,{title:s("Team Members"),className:"mb-6",extra:u.user.is_owner?e.jsx(m,{type:"primary",icon:e.jsx(T,{}),onClick:()=>f(!0),className:"bg-primary-500",children:s("Add Team Member")}):null,children:e.jsx("div",{className:"overflow-x-auto",children:e.jsx(A,{dataSource:D,columns:X,rowKey:"id",pagination:!1,scroll:{x:"max-content"}})})})},"3"),e.jsx(g,{tab:e.jsxs("span",{className:"flex items-center",children:[e.jsx(ie,{className:i==="top"?"mr-1":"mr-2"}),e.jsx("span",{className:i==="top"?"hidden sm:inline":"",children:s("Categories")})]}),children:e.jsx(j,{title:s("Manage Categories"),className:"mb-6",extra:e.jsx(m,{type:"primary",icon:e.jsx(T,{}),onClick:()=>y(!0),className:"bg-primary-500",children:s("Add Category")}),children:e.jsx("div",{className:"overflow-x-auto",children:e.jsx(A,{dataSource:L,columns:Z,rowKey:"id",pagination:!1,scroll:{x:"max-content"}})})})},"4"),e.jsx(g,{tab:e.jsxs("span",{className:"tab-label",children:[e.jsx(ne,{}),E>=768&&e.jsx("span",{className:"ml-2",children:s("Shops")})]}),children:e.jsx(j,{title:s("Shops"),className:"mb-6",extra:e.jsx(m,{type:"primary",icon:e.jsx(T,{}),onClick:()=>N(!0),className:"bg-primary-500",children:s("Shop")}),children:e.jsx("div",{className:"overflow-x-auto",children:e.jsx(A,{dataSource:_,columns:ee,rowKey:"id",pagination:!1,scroll:{x:"max-content"}})})})},"5")]})})})}),e.jsx(b,{title:s("Add New Category"),open:W,onOk:G,onCancel:()=>{y(!1),o.reset()},confirmLoading:o.processing,children:e.jsxs(l,{layout:"vertical",children:[e.jsx(l.Item,{label:s("Category Name"),validateStatus:o.errors.name?"error":"",help:o.errors.name,required:!0,children:e.jsx(p,{value:o.data.name,onChange:r=>o.setData("name",r.target.value),placeholder:s("Enter category name")})}),e.jsx(l.Item,{label:s("Description"),validateStatus:o.errors.description?"error":"",help:o.errors.description,children:e.jsx(R,{value:o.data.description,onChange:r=>o.setData("description",r.target.value),placeholder:s("Enter category description (optional)"),rows:4})})]})}),e.jsxs(b,{title:s("Add Team Member"),open:K,onCancel:()=>{f(!1),t.reset()},footer:[e.jsx(m,{onClick:()=>{f(!1),t.reset()},children:s("Cancel")},"cancel"),e.jsx(m,{type:"primary",onClick:O,loading:t.processing,children:s("Add")},"submit")],children:[t.errors.phone&&e.jsx(ce,{message:s("Error"),description:t.errors.phone,type:"error",showIcon:!0,className:"mb-4"}),e.jsxs(l,{layout:"vertical",children:[e.jsx(l.Item,{label:s("Name"),validateStatus:t.errors.name?"error":"",help:t.errors.name,required:!0,children:e.jsx(p,{value:t.data.name,onChange:r=>t.setData("name",r.target.value),placeholder:s("Enter name"),prefix:e.jsx(k,{})})}),e.jsx(l.Item,{label:s("Phone Number"),validateStatus:t.errors.phone?"error":"",help:t.errors.phone,required:!0,children:e.jsx(p,{value:t.data.phone,onChange:r=>t.setData("phone",r.target.value),placeholder:s("Enter phone number (e.g. +251912345678 or 0912345678)"),prefix:e.jsx(de,{})})}),e.jsxs(l.Item,{label:s("Role"),validateStatus:t.errors.role?"error":"",help:t.errors.role,required:!0,children:[e.jsxs(x.Group,{value:t.data.role||"seller",onChange:r=>t.setData("role",r.target.value),children:[e.jsx(x,{value:"seller",children:s("Seller")}),e.jsx(x,{value:"admin",children:s("Admin")})]}),e.jsx("div",{className:"text-gray-500 text-xs mt-1",children:s("Sellers can only make sales. Admins can manage products and view reports.")})]})]})]}),e.jsx(b,{title:s("Add New Shop"),open:z,onOk:Q,onCancel:()=>{N(!1),a.reset()},confirmLoading:a.processing,children:e.jsxs(l,{layout:"vertical",children:[e.jsx(l.Item,{label:s("Shop Name"),validateStatus:a.errors.name?"error":"",help:a.errors.name,required:!0,children:e.jsx(p,{value:a.data.name,onChange:r=>a.setData("name",r.target.value),placeholder:s("Enter shop name")})}),e.jsx(l.Item,{label:s("Location"),validateStatus:a.errors.location?"error":"",help:a.errors.location,children:e.jsx(p,{value:a.data.location,onChange:r=>a.setData("location",r.target.value),placeholder:s("Enter shop location")})}),e.jsx(l.Item,{label:s("Phone"),validateStatus:a.errors.phone?"error":"",help:a.errors.phone,children:e.jsx(p,{value:a.data.phone,onChange:r=>a.setData("phone",r.target.value),placeholder:s("Enter shop phone")})}),e.jsx(l.Item,{label:s("Description"),validateStatus:a.errors.description?"error":"",help:a.errors.description,children:e.jsx(R,{value:a.data.description,onChange:r=>a.setData("description",r.target.value),placeholder:s("Enter shop description (optional)"),rows:4})})]})})]})};export{Oe as default};
