import{u as k,r as d,v as j,R as L,j as e,$ as M}from"./app-BrWmvN9o.js";import{A as D}from"./AuthenticatedLayout-BHqB-7Ue.js";import{s as a}from"./index-D8fjzl8g.js";import{B as g}from"./EllipsisOutlined-BVOabwk_.js";import{R as V}from"./index-BB7cPWkL.js";import{L as b}from"./index-77XtHber.js";import{C as _}from"./index-ooL_S3fB.js";import{R as B}from"./DeleteOutlined-CpYCOdIx.js";import{M as v}from"./index-BSgkkuUf.js";import{F as u}from"./index-D7Nbh5W0.js";import{I as N}from"./index-Bj_dR6NL.js";import{A as O}from"./index-Ckg9Niwg.js";/* empty css            */import"./MenuOutlined-CfE2IyGz.js";import"./move-D6Noa-TR.js";import"./BaseInput-xYuoHulp.js";import"./SearchOutlined-DiTr9x9V.js";import"./DownOutlined-Bl3KEFK6.js";import"./row-_w8NHETX.js";import"./index-BRRz5ppq.js";import"./index-D8yoxiRN.js";import"./index-CUWDS_la.js";import"./EyeOutlined-CFoueOds.js";const le=({auth:y,warehouses:h,flash:o})=>{const{t:s}=k(),[w,c]=d.useState(!1),[C,n]=d.useState(!1),[t,I]=d.useState(null),{data:x,setData:p,post:W,processing:E,errors:i,reset:f}=j({name:"",location:""}),{delete:S}=j();L.useEffect(()=>{o.message&&a.success(o.message),o.error&&a.error(o.error)},[o]);const A=()=>{W(route("warehouses.store"),{onSuccess:()=>{c(!1),f()},onError:()=>{a.error(s("Error adding warehouse"))}})},R=r=>{if(h.find(l=>l.id===r).items_count>0){a.error(s("Cannot delete warehouse with items")),n(!1);return}S(route("warehouses.destroy",r),{onSuccess:()=>{n(!1)},onError:()=>{a.error(s("Error deleting warehouse"))}})};return e.jsxs(D,{user:y.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:s("Warehouses")}),children:[e.jsx(M,{title:s("Warehouses")}),e.jsxs("div",{className:"container mx-auto px-4 py-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-primary-500 text-3xl font-bold",children:s("Warehouses")}),e.jsxs(g,{type:"primary",className:"bg-primary-500",onClick:()=>c(!0),children:[e.jsx(V,{})," ",s("Warehouse")]})]}),e.jsx("div",{className:"w-full",children:e.jsx(b,{grid:{gutter:16,xs:1,sm:1,md:2,lg:3,xl:3},dataSource:h,renderItem:r=>{var m,l;return e.jsx(b.Item,{children:e.jsxs(_,{hoverable:!0,className:"shadow-md",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:r.name}),e.jsxs("div",{className:"flex items-center",children:[e.jsxs("span",{className:"mr-2",children:[s("Items count"),": ",r.items_count]}),e.jsx(g,{icon:e.jsx(B,{}),danger:!0,onClick:()=>{I(r),n(!0)}})]})]}),e.jsxs("div",{className:"mt-2",children:[e.jsxs("p",{children:[e.jsxs("strong",{children:[s("Location"),":"]})," ",r.location||s("Not specified")]}),e.jsxs("p",{children:[e.jsxs("strong",{children:[s("Owner"),":"]})," ",(m=r.owner)==null?void 0:m.name]}),e.jsxs("p",{children:[e.jsxs("strong",{children:[s("Phone number"),":"]})," ",((l=r.owner)==null?void 0:l.phone_number)||s("Not provided")]})]})]})})}})}),e.jsx(v,{title:s("Add Warehouse"),open:w,onOk:A,onCancel:()=>{c(!1),f()},confirmLoading:E,children:e.jsxs(u,{layout:"vertical",children:[e.jsx(u.Item,{label:s("Warehouse Name"),validateStatus:i.name?"error":"",help:i.name,required:!0,children:e.jsx(N,{value:x.name,onChange:r=>p("name",r.target.value),placeholder:s("Enter warehouse name")})}),e.jsx(u.Item,{label:s("Warehouse Location"),validateStatus:i.location?"error":"",help:i.location,children:e.jsx(N,{value:x.location,onChange:r=>p("location",r.target.value),placeholder:s("Enter warehouse location (optional)")})})]})}),e.jsxs(v,{title:s("Confirm Delete"),open:C,onOk:()=>R(t==null?void 0:t.id),onCancel:()=>n(!1),okText:s("Delete"),cancelText:s("Cancel"),okButtonProps:{danger:!0},children:[e.jsx("p",{children:s("Are you sure you want to delete this warehouse?")}),(t==null?void 0:t.items_count)>0&&e.jsx(O,{message:s("Warning: This warehouse contains items and cannot be deleted"),type:"warning",showIcon:!0,className:"mt-4"})]})]})]})};export{le as default};
